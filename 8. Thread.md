## Thread

- 쓰레드
  - 프로그램 내부의 흐름, 맥
- **Multi thread(다중 쓰레드)**
  - 한 프로그램에 2개 이상의 맥
  - **맥이 빠른 시간 간격으로 스위칭**한다. -> 여러 맥이 동시에 실행되는 것처럼 보인다. (concurrent[일반적으로 이것을 말함] vs simultaneous[한순간에 2개의 일이 일어나는 것])
- 예제
  - 웹 브라우저 : 화면 출력하는 스레드 + 데이터 읽어오는 스레드
  - 워드 프로세서 : 화면 출력하는 스레드 + 키보드 입력받는 스레드 + 철자/문법 오류 확인 스레드
  - 음악 연주기, 동영상 플레이어, Eclipse IDE

-> 최근 운영체제는 **context switching**이 **프로세스 단위**가 아닌 **thread 단위**로 일어난다.

### 1. thread 구조

- 프로세스의 메모리 공간(data,code)을 서로 공유한다.
- 스택은 공유하지 않는다.(stack에는 parameter나 return address를 저장하기 때문에, 호출하는 method가 다를 수 있기 때문에) (비공유 : 개별적인 PC, SP, registers, stack)
- 프로세스의 자원을 공유한다. (file, I/O, ...)

```java
class Test {
  public static void main(String[] args){
    MyThread th = new MyThread(); // 새로운 스레드를 하나 만듬
    th.start(); // run 메소드 실행 -> th의 무한 루프가 돌아가면서 B를 찍는다. (MyThread)
    while (true)
      System.out.print("A"); // 동시에 얘도 실행 -> A를 찍는다. (main thread)
  }
}
class MyThread extends Thread {
  /*Thread class가 public void run 메소드를 가지고 있기 때문에 맥을 치환해주기 위해서 하위 클래스를 만든다.*/
  public void run(){
    while (true)
      System.out.print("B");
  }
}
// 결과적으로 A와 B가 섞여서 나온다.
```
